<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="site_libs/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" />




<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 54px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 59px;
  margin-top: -59px;
}

.section h2 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h3 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h4 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h5 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h6 {
  padding-top: 59px;
  margin-top: -59px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">FATE-HD</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="publications.html">
    <span class="ion ion-document-text"></span>
     
    Publications
  </a>
</li>
<li>
  <a href="framework.html">
    <span class="fa fa-cogs"></span>
     
    Modelling Framework
  </a>
</li>
<li class="dropdown-header"></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="ion ion-settings"></span>
     
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">INSTALLATION</li>
    <li>
      <a href="1a_fate-hd_tutorial_INSTALLATION.html">Get FATE-HD</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">GETTING STARTED</li>
    <li>
      <a href="1b_fate-hd_tutorial_GETTING_STARTED.html">Run a simulation</a>
    </li>
    <li class="dropdown-header">Use a module</li>
    <li class="divider"></li>
    <li class="dropdown-header">DATASETS</li>
    <li class="dropdown-header">Page C</li>
  </ul>
</li>
<li>
  <a href="graphics.html">
    <span class="ion ion-ios-pulse-strong"></span>
     
    Graphics
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a>
    <span class="fa fa-question fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://sourceforge.net/projects/biomove/">
    <span class="fa fa-code"></span>
     
    SourceForge
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<p><br/> <br/></p>
<p>For more details, please check <a href="http://www.will.chez-alice.fr/pdf/BoulangeatGCB2014.pdf" title="Boulangeat, I., Georges, D., Thuiller, W., FATE-HD: A spatially and temporally explicit integrated model for predicting vegetation structure and diversity at regional scale. Global Change Biology, 20, 2368–2378.">Boulangeat, 2014</a> or the <a href="https://mayagueguen.github.io/FATE-WEBSITE/publications.html">Publications page</a>.</p>
<p><br/><br/></p>
<div id="global-view" class="section level2">
<h2>Global view</h2>
<p><br/></p>
<div id="conceptual-diagram-of-fate-hd" class="section level3">
<h3>Conceptual diagram of <code>FATE-HD</code></h3>
<p>The whole area is divided in grid-cells in which an independent <strong>succession model A)</strong> regulates the PFG life cycle. PFG abundances are structured by age into cohorts and each cohort is attributed to a height stratum according to the growth parameters.</p>
<p>Four submodels affect this cycle at various levels :</p>
<p><strong>B) Shading</strong> regulates interactions between cohorts affecting germination, recruitment and survival.</p>
<p><strong>C) Habitat suitability</strong> affects the recruitment and fecundity rates.</p>
<p><strong>D) The seed dispersal model</strong> makes <code>FATE-HD</code> spatially explicit by connecting grid-cells.<br />
It depends on the amount of seeds produced by mature plants and affects each PFG’s seed bank in each cell.</p>
<p><strong>E) Disturbances</strong> affect PFG survival and fecundity.</p>
<p><br/></p>
<p><img src="pictures/FATE_loop_1.png" alt="Global scheme" style="width:800px;"></p>
<p><br/><br/></p>
</div>
<div id="life-cycle-of-each-pfg-within-fate-hd-and-influences-from-sub-models" class="section level3">
<h3>Life cycle of each PFG within <code>FATE-HD</code> and influences from sub-models</h3>
<p>Only three age classes are considered : germinant, juvenile and mature.</p>
<p>The <strong>recruitment</strong> is influenced by the habitat suitability and the biotic interactions.</p>
<p><strong>Mortality</strong> occurs when light conditions are not favorable or when the PFG completes its life span.</p>
<p>In addition, the disturbance regime directly affects juvenile or mature PFG and may for instance result in PFG death, impede <strong>seed production</strong> by reducing mature PFG age to N-1, or <strong>revitalize senescents</strong> by reducing their age to M-1.</p>
<p><br/></p>
<p><img src="pictures/FATE_loop_3.png" alt="Internal loop" style="width:800px;"></p>
<p><br/><br/><br/></p>
</div>
</div>
<div id="source-code" class="section level2">
<h2>Source code</h2>
<p><br/></p>
<div id="class-diagram" class="section level3">
<h3>Class diagram</h3>
<p>A <code>FATE-HD</code> simulation is based on a map whose pixels each contain a succession model (<code>SuFate</code>). This model can depend or not on habitat suitability (<code>SuFateH</code>).</p>
<p>All the pixels are linked together by the dispersal model (<code>Disp</code>).</p>
<p>Input parameters are given to the software via the simulation parameter file (<code>FilesOfParameters</code>) which contain global (<code>GlobalSimulParameters</code>) and PFG related parameters as well as maps. All of these informations are read and included into the model using templates for parameters (<code>Params</code>), constants (<code>FGutils</code>) and rasters (<code>Spatial</code>).</p>
<p><br/></p>
<p><img src="pictures/FATE_loop_4.png" alt="Class diagram" style="width:800px;"></p>
<p><br/><br/></p>
</div>
<div id="structural-equations" class="section level3">
<h3>Structural equations</h3>
<p><br/></p>
<div id="life-cycle" class="section level4">
<h4>Life cycle</h4>
<p><br/></p>
<p>The succession model within <code>FATE-HD</code> describes the PFG demography with 5 processes :</p>
<ul>
<li>germination</li>
<li>recruitment</li>
<li>growth</li>
<li>survival</li>
<li>fecundity</li>
</ul>
<p>Below are detailed these different steps, in the order in which they are executed within the model.<br />
All the <code>getEnv...()</code> functions represent the influence of the habitat suitability if the <code>SuFateh</code> model is selected. These functions return either 1 or 0 depending if the habitat within the pixel is suitable or not for the considered PFG. They will influence of specific process, like mortality, recruitment or fecundity.</p>
<p><br/></p>
<ol style="list-style-type: decimal">
<li><strong>Lifespan :</strong><br />
In theory, the lifetime of a species could be influenced by the environment.<br />
Currently, habitat or not, <span class="math inline">\(getEnvMort() = 1\)</span>.</li>
</ol>
<p><span class="math display">\[LifeSpan * getEnvMort()\]</span> <br/></p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Maturation time :</strong><br />
The time at which a PFG is able to produce seeds can also be influenced by its habitat, in a negative way.<br />
If it is the case (<code>SuFateh</code> model selected), then <span class="math inline">\(maturation = LifeSpan\)</span>.<br />
Which means there will be no fecundity, and then no seeds produced.</li>
</ol>
<span class="math display">\[\begin{align}
maturation &amp;= (LifeSpan - Maturity) * (1.0 - getEnvGrowth()) + Maturity \\
maturation &amp;= ceil(maturation)
\end{align}\]</span>
<p><br/></p>
<ol start="3" style="list-style-type: decimal">
<li><strong>Germination rate :</strong><br />
The number of seeds available as well as the resource level in stratum 0 (which represents the enforced dormancy) allow to determine the proportion of seeds that will germinate.</li>
</ol>
<p><span class="math display">\[GerminationRate = AvailSeeds * \frac{MaxRecruitment}{100}\]</span> with <span class="math inline">\(MaxRecruitment = getMaxRecruit(\text{strata 0}) =\)</span> proportion of seeds that can germinate.</p>
<p><br/></p>
<ol start="4" style="list-style-type: decimal">
<li><strong>Recruitment rate :</strong><br />
The establishment of the seeds that are able to germinate then depends on the ability of those germinants to withstand the conditions within stratum 0. If the habitat is not favorable, then the recruitment is null.</li>
</ol>
<span class="math display">\[\begin{align}
&amp;\text{if ( } abund &lt; 10 * MaxAbund \text{ )} \\
&amp;\{ \\
&amp; RecruitmentRate = 1.0 * GerminationRate * (\frac{MaxAbund}{LifeSpan - Maturity}) * getEnvRecrRate() \\
&amp;\}
\end{align}\]</span>
<p>with <span class="math inline">\(MaxAbund \in {1,2,3}\)</span> and representing the maximum shade a PFG can produce in a pixel (i.e. similar to a number of individuals), proportionally to the number of strata it can occupy, taller PFG producing naturally more shade.</p>
<p>The condition <span class="math inline">\(abund &lt; 10 * MaxAbund\)</span> helps regulate populations : new individuals only grow if there is no too many individuals yet within the pixel.</p>
<p><br/></p>
<ol start="5" style="list-style-type: decimal">
<li><strong>Mature abundance :</strong><br />
The number of mature individuals (i.e. whose age is between maturity and lifetime) is corrected by the maximum capacity of each PFG (<span class="math inline">\(MaxAbund\)</span>).</li>
</ol>
<p><span class="math display">\[MatureAbund = \frac{getAbundBetween(maturation, LifeSpan)}{\frac{MaxAbund}{5}}\]</span> <br/></p>
<ol start="6" style="list-style-type: decimal">
<li><strong>Fecundity :</strong><br />
The new number of seeds that will be produced is also affected by the habitat. If the habitat is not favorable, then the fecundity is null and no seeds are produced.</li>
</ol>
<p><span class="math display">\[fecundity = min(1, MatureAbund) * PotentialFecund * getEnvFecund()\]</span> with <span class="math inline">\(PotentialFecund = 100\)</span>.</p>
<p><br/> <br/></p>
</div>
<div id="code-specificities" class="section level4">
<h4>!! Code specificities !!</h4>
<p><br/></p>
<ul>
<li><strong>Save raster abundances :</strong><br />
The fraction must be <span class="math inline">\(&gt; 1\)</span>, meaning <span class="math inline">\(totalNumAbund(pfg, stratum)\)</span> must be <span class="math inline">\(&gt; GLOBAL\_HIGH\_ABUND\)</span>.</li>
</ul>
<span class="math display">\[\begin{align}
Abund &amp;= 10,000 * \frac{totalNumAbund(pfg, stratum)}{GLOBAL\_HIGH\_ABUND} \\
Abund &amp;= min(10,000, Abund)
\end{align}\]</span>
<p><br/></p>
<ul>
<li><strong>Light of strata :</strong></li>
</ul>
<p><span class="math display">\[ImmSize * CohortSize * AgeRange\]</span> with AgeRange = old - young, brkStra - young, old - MatAge, MatAge - young</p>
<p><br/></p>
<ul>
<li><strong>Simplify legions :</strong><br />
Round abundances to save space, by setting size to :</li>
</ul>
<p><span class="math display">\[min(MAX\_BY\_COHORT, \frac{size(pfg, cohort) + 5000}{10,000^2})\]</span></p>
<p><br/></p>
<ul>
<li><strong>Set light resources :</strong></li>
</ul>
<span class="math display">\[\begin{align}
&amp;\text{if ( } abund &lt; GLOBAL\_MEDIUM\_RESOURCES\_TRESH \text{ )} \\
&amp;\{ \\
&amp; light = HIGH \\
&amp;\} \text{ else if ( } abund &lt; GLOBAL\_LOW\_RESOURCES\_TRESH \text{ )} \\
&amp;\{ \\
&amp; light = MEDIUM \\
&amp;\} \text{ else} \\
&amp;\{ \\
&amp; light = LOW \\
&amp;\}
\end{align}\]</span>
</div>
</div>
</div>

<br/><br/><br/><br/>

<p  style="text-align:center;"><i>Copyright &copy; 2018 Laboratoire d'Ecologie Alpine, Grenoble. All rights reserved.</i></p>

<br/>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
